{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["const BASE_URL = 'http://localhost:3000/todos';\n\nconst form = document.querySelector('.todo-form');\nconst container = document.querySelector('.list');\n\nform.addEventListener('submit', handlerSubmit);\ncontainer.addEventListener('click', handleUpdate);\ncontainer.addEventListener('click', handleDelete);\n\nfunction fetchData(url = BASE_URL, options = {}) {\n  return fetch(url, options).then(response => {\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    return response.json();\n  });\n}\n\nfetchData(BASE_URL)\n  .then(data => container.insertAdjacentHTML('beforeend', createMarkup(data)))\n  .catch(error => console.log(error.message));\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({ id, title, completed }) => `\n        <li data-id=\"${id}\" class=\"list__item\">\n            <input type=\"checkbox\" class=\"list__checkbox\" ${\n              completed && 'checked'\n            } >\n            <h2 class=\"list__title\">${title}</h2>\n            <button class=\"list__btn\">X</button>\n        </li>\n    `\n    )\n    .join('');\n}\n\nfunction handlerSubmit(event) {\n  event.preventDefault();\n\n  const { todo } = event.target.elements;\n\n  fetchData(BASE_URL, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ title: todo.value, completed: false }),\n  })\n    .then(data => {\n      container.insertAdjacentHTML('beforeend', createMarkup([data]));\n    })\n    .catch(error => console.log(error.message))\n    .finally(() => event.target.reset());\n}\n\nfunction handleUpdate(event) {\n  if (!event.target.classList.contains('list__checkbox')) {\n    return;\n  }\n\n  event.preventDefault();\n\n  const parent = event.target.closest('.list__item');\n  const id = parent.dataset.id;\n\n  fetchData(`${BASE_URL}/${id}`, {\n    method: 'PATCH',\n    body: JSON.stringify({ completed: event.target.checked }),\n  })\n    .then(data => (event.target.checked = data.completed))\n    .catch(error => console.log(error.message));\n}\n\nfunction handleDelete(event) {\n  if (!event.target.classList.contains('list__btn')) {\n    return;\n  }\n\n  const parent = event.target.closest('.list__item');\n  const id = parent.dataset.id;\n\n  fetchData(`${BASE_URL}/${id}`, {\n    method: 'DELETE',\n  })\n    .then(data => parent.remove())\n    .catch(error => console.log(error.message));\n}\n"],"names":["BASE_URL","form","container","handlerSubmit","handleUpdate","handleDelete","fetchData","url","options","response","data","createMarkup","error","arr","id","title","completed","event","todo","parent"],"mappings":"wFAAA,MAAMA,EAAW,8BAEXC,EAAO,SAAS,cAAc,YAAY,EAC1CC,EAAY,SAAS,cAAc,OAAO,EAEhDD,EAAK,iBAAiB,SAAUE,CAAa,EAC7CD,EAAU,iBAAiB,QAASE,CAAY,EAChDF,EAAU,iBAAiB,QAASG,CAAY,EAEhD,SAASC,EAAUC,EAAMP,EAAUQ,EAAU,CAAA,EAAI,CAC/C,OAAO,MAAMD,EAAKC,CAAO,EAAE,KAAKC,GAAY,CAC1C,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,UAAU,EAErC,OAAOA,EAAS,MACpB,CAAG,CACH,CAEAH,EAAUN,CAAQ,EACf,KAAKU,GAAQR,EAAU,mBAAmB,YAAaS,EAAaD,CAAI,CAAC,CAAC,EAC1E,MAAME,GAAS,QAAQ,IAAIA,EAAM,OAAO,CAAC,EAE5C,SAASD,EAAaE,EAAK,CACzB,OAAOA,EACJ,IACC,CAAC,CAAE,GAAAC,EAAI,MAAAC,EAAO,UAAAC,CAAW,IAAK;AAAA,uBACbF,CAAE;AAAA,4DAEXE,GAAa,SACd;AAAA,sCACyBD,CAAK;AAAA;AAAA;AAAA,KAItC,EACA,KAAK,EAAE,CACZ,CAEA,SAASZ,EAAcc,EAAO,CAC5BA,EAAM,eAAc,EAEpB,KAAM,CAAE,KAAAC,CAAM,EAAGD,EAAM,OAAO,SAE9BX,EAAUN,EAAU,CAClB,OAAQ,OACR,QAAS,CACP,eAAgB,kBACjB,EACD,KAAM,KAAK,UAAU,CAAE,MAAOkB,EAAK,MAAO,UAAW,GAAO,CAChE,CAAG,EACE,KAAKR,GAAQ,CACZR,EAAU,mBAAmB,YAAaS,EAAa,CAACD,CAAI,CAAC,CAAC,CACpE,CAAK,EACA,MAAME,GAAS,QAAQ,IAAIA,EAAM,OAAO,CAAC,EACzC,QAAQ,IAAMK,EAAM,OAAO,MAAO,CAAA,CACvC,CAEA,SAASb,EAAaa,EAAO,CAC3B,GAAI,CAACA,EAAM,OAAO,UAAU,SAAS,gBAAgB,EACnD,OAGFA,EAAM,eAAc,EAGpB,MAAMH,EADSG,EAAM,OAAO,QAAQ,aAAa,EAC/B,QAAQ,GAE1BX,EAAU,GAAGN,CAAQ,IAAIc,CAAE,GAAI,CAC7B,OAAQ,QACR,KAAM,KAAK,UAAU,CAAE,UAAWG,EAAM,OAAO,QAAS,CAC5D,CAAG,EACE,KAAKP,GAASO,EAAM,OAAO,QAAUP,EAAK,SAAU,EACpD,MAAME,GAAS,QAAQ,IAAIA,EAAM,OAAO,CAAC,CAC9C,CAEA,SAASP,EAAaY,EAAO,CAC3B,GAAI,CAACA,EAAM,OAAO,UAAU,SAAS,WAAW,EAC9C,OAGF,MAAME,EAASF,EAAM,OAAO,QAAQ,aAAa,EAC3CH,EAAKK,EAAO,QAAQ,GAE1Bb,EAAU,GAAGN,CAAQ,IAAIc,CAAE,GAAI,CAC7B,OAAQ,QACZ,CAAG,EACE,KAAKJ,GAAQS,EAAO,QAAQ,EAC5B,MAAMP,GAAS,QAAQ,IAAIA,EAAM,OAAO,CAAC,CAC9C"}